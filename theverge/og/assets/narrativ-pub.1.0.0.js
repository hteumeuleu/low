(()=>{var t={669:(t,e,n)=>{t.exports=n(609)},448:(t,e,n)=>{"use strict";var i=n(867),r=n(26),s=n(372),o=n(327),a=n(97),c=n(109),u=n(985),l=n(61);t.exports=function(t){return new Promise((function(e,n){var h=t.data,d=t.headers;i.isFormData(h)&&delete d["Content-Type"];var p=new XMLHttpRequest;if(t.auth){var f=t.auth.username||"",m=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";d.Authorization="Basic "+btoa(f+":"+m)}var g=a(t.baseURL,t.url);if(p.open(t.method.toUpperCase(),o(g,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var i="getAllResponseHeaders"in p?c(p.getAllResponseHeaders()):null,s={data:t.responseType&&"text"!==t.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:i,config:t,request:p};r(e,n,s),p=null}},p.onabort=function(){p&&(n(l("Request aborted",t,"ECONNABORTED",p)),p=null)},p.onerror=function(){n(l("Network Error",t,null,p)),p=null},p.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(l(e,t,"ECONNABORTED",p)),p=null},i.isStandardBrowserEnv()){var w=(t.withCredentials||u(g))&&t.xsrfCookieName?s.read(t.xsrfCookieName):void 0;w&&(d[t.xsrfHeaderName]=w)}if("setRequestHeader"in p&&i.forEach(d,(function(t,e){void 0===h&&"content-type"===e.toLowerCase()?delete d[e]:p.setRequestHeader(e,t)})),i.isUndefined(t.withCredentials)||(p.withCredentials=!!t.withCredentials),t.responseType)try{p.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&p.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){p&&(p.abort(),n(t),p=null)})),h||(h=null),p.send(h)}))}},609:(t,e,n)=>{"use strict";var i=n(867),r=n(849),s=n(321),o=n(185);function a(t){var e=new s(t),n=r(s.prototype.request,e);return i.extend(n,s.prototype,e),i.extend(n,e),n}var c=a(n(655));c.Axios=s,c.create=function(t){return a(o(c.defaults,t))},c.Cancel=n(263),c.CancelToken=n(972),c.isCancel=n(502),c.all=function(t){return Promise.all(t)},c.spread=n(713),c.isAxiosError=n(268),t.exports=c,t.exports.default=c},263:t=>{"use strict";function e(t){this.message=t}e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,t.exports=e},972:(t,e,n)=>{"use strict";var i=n(263);function r(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new i(t),e(n.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var t;return{token:new r((function(e){t=e})),cancel:t}},t.exports=r},502:t=>{"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},321:(t,e,n)=>{"use strict";var i=n(867),r=n(327),s=n(782),o=n(572),a=n(185);function c(t){this.defaults=t,this.interceptors={request:new s,response:new s}}c.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[o,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)n=n.then(e.shift(),e.shift());return n},c.prototype.getUri=function(t){return t=a(this.defaults,t),r(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],(function(t){c.prototype[t]=function(e,n){return this.request(a(n||{},{method:t,url:e,data:(n||{}).data}))}})),i.forEach(["post","put","patch"],(function(t){c.prototype[t]=function(e,n,i){return this.request(a(i||{},{method:t,url:e,data:n}))}})),t.exports=c},782:(t,e,n)=>{"use strict";var i=n(867);function r(){this.handlers=[]}r.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){i.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=r},97:(t,e,n)=>{"use strict";var i=n(793),r=n(303);t.exports=function(t,e){return t&&!i(e)?r(t,e):e}},61:(t,e,n)=>{"use strict";var i=n(481);t.exports=function(t,e,n,r,s){var o=new Error(t);return i(o,e,n,r,s)}},572:(t,e,n)=>{"use strict";var i=n(867),r=n(527),s=n(502),o=n(655);function a(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return a(t),t.headers=t.headers||{},t.data=r(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),i.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||o.adapter)(t).then((function(e){return a(t),e.data=r(e.data,e.headers,t.transformResponse),e}),(function(e){return s(e)||(a(t),e&&e.response&&(e.response.data=r(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},481:t=>{"use strict";t.exports=function(t,e,n,i,r){return t.config=e,n&&(t.code=n),t.request=i,t.response=r,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},185:(t,e,n)=>{"use strict";var i=n(867);t.exports=function(t,e){e=e||{};var n={},r=["url","method","data"],s=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function c(t,e){return i.isPlainObject(t)&&i.isPlainObject(e)?i.merge(t,e):i.isPlainObject(e)?i.merge({},e):i.isArray(e)?e.slice():e}function u(r){i.isUndefined(e[r])?i.isUndefined(t[r])||(n[r]=c(void 0,t[r])):n[r]=c(t[r],e[r])}i.forEach(r,(function(t){i.isUndefined(e[t])||(n[t]=c(void 0,e[t]))})),i.forEach(s,u),i.forEach(o,(function(r){i.isUndefined(e[r])?i.isUndefined(t[r])||(n[r]=c(void 0,t[r])):n[r]=c(void 0,e[r])})),i.forEach(a,(function(i){i in e?n[i]=c(t[i],e[i]):i in t&&(n[i]=c(void 0,t[i]))}));var l=r.concat(s).concat(o).concat(a),h=Object.keys(t).concat(Object.keys(e)).filter((function(t){return-1===l.indexOf(t)}));return i.forEach(h,u),n}},26:(t,e,n)=>{"use strict";var i=n(61);t.exports=function(t,e,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(i("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},527:(t,e,n)=>{"use strict";var i=n(867);t.exports=function(t,e,n){return i.forEach(n,(function(n){t=n(t,e)})),t}},655:(t,e,n)=>{"use strict";var i=n(867),r=n(16),s={"Content-Type":"application/x-www-form-urlencoded"};function o(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var a,c={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(a=n(448)),a),transformRequest:[function(t,e){return r(e,"Accept"),r(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(o(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(o(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(t){c.headers[t]={}})),i.forEach(["post","put","patch"],(function(t){c.headers[t]=i.merge(s)})),t.exports=c},849:t=>{"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return t.apply(e,n)}}},327:(t,e,n)=>{"use strict";var i=n(867);function r(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var s;if(n)s=n(e);else if(i.isURLSearchParams(e))s=e.toString();else{var o=[];i.forEach(e,(function(t,e){null!=t&&(i.isArray(t)?e+="[]":t=[t],i.forEach(t,(function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),o.push(r(e)+"="+r(t))})))})),s=o.join("&")}if(s){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+s}return t}},303:t=>{"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},372:(t,e,n)=>{"use strict";var i=n(867);t.exports=i.isStandardBrowserEnv()?{write:function(t,e,n,r,s,o){var a=[];a.push(t+"="+encodeURIComponent(e)),i.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),i.isString(r)&&a.push("path="+r),i.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},793:t=>{"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},268:t=>{"use strict";t.exports=function(t){return"object"==typeof t&&!0===t.isAxiosError}},985:(t,e,n)=>{"use strict";var i=n(867);t.exports=i.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(t){var i=t;return e&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(e){var n=i.isString(e)?r(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},16:(t,e,n)=>{"use strict";var i=n(867);t.exports=function(t,e){i.forEach(t,(function(n,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[i])}))}},109:(t,e,n)=>{"use strict";var i=n(867),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,s,o={};return t?(i.forEach(t.split("\n"),(function(t){if(s=t.indexOf(":"),e=i.trim(t.substr(0,s)).toLowerCase(),n=i.trim(t.substr(s+1)),e){if(o[e]&&r.indexOf(e)>=0)return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([n]):o[e]?o[e]+", "+n:n}})),o):o}},713:t=>{"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},867:(t,e,n)=>{"use strict";var i=n(849),r=Object.prototype.toString;function s(t){return"[object Array]"===r.call(t)}function o(t){return void 0===t}function a(t){return null!==t&&"object"==typeof t}function c(t){if("[object Object]"!==r.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function u(t){return"[object Function]"===r.call(t)}function l(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),s(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}t.exports={isArray:s,isArrayBuffer:function(t){return"[object ArrayBuffer]"===r.call(t)},isBuffer:function(t){return null!==t&&!o(t)&&null!==t.constructor&&!o(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isPlainObject:c,isUndefined:o,isDate:function(t){return"[object Date]"===r.call(t)},isFile:function(t){return"[object File]"===r.call(t)},isBlob:function(t){return"[object Blob]"===r.call(t)},isFunction:u,isStream:function(t){return a(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function t(){var e={};function n(n,i){c(e[i])&&c(n)?e[i]=t(e[i],n):c(n)?e[i]=t({},n):s(n)?e[i]=n.slice():e[i]=n}for(var i=0,r=arguments.length;i<r;i++)l(arguments[i],n);return e},extend:function(t,e,n){return l(e,(function(e,r){t[r]=n&&"function"==typeof e?i(e,n):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}},931:(t,e,n)=>{"use strict";var i,r=new Uint8Array(16);function s(){if(!i&&!(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(r)}const o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,a=function(t){return"string"==typeof t&&o.test(t)};for(var c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));const l=function(t,e,n){var i=(t=t||{}).random||(t.rng||s)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(var r=0;r<16;++r)e[n+r]=i[r];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(c[t[e+0]]+c[t[e+1]]+c[t[e+2]]+c[t[e+3]]+"-"+c[t[e+4]]+c[t[e+5]]+"-"+c[t[e+6]]+c[t[e+7]]+"-"+c[t[e+8]]+c[t[e+9]]+"-"+c[t[e+10]]+c[t[e+11]]+c[t[e+12]]+c[t[e+13]]+c[t[e+14]]+c[t[e+15]]).toLowerCase();if(!a(n))throw TypeError("Stringified UUID is invalid");return n}(i)};class h{constructor(t){this.config=t,this.urlPath=`${this.config.eventHost}/${this.config.path}`,this.pageSessionUuid=l(),this.sessionID=null,this.isNewSession=!1}static getInstance(t=null){return this.instance||(this.instance=new h(t)),this.instance}requestTrackingPixel(){return this.requestSession().then((()=>{let t=new window.Image;const e=this.sessionID?`?uid_bam=${this.sessionID}&cache_buster=${Date.now()}`:"";t.setAttribute("src",`${this.urlPath}/session.gif${e}`),(t=>{new Promise((e=>{t.onload=e}))})(t)})).catch((()=>{}))}requestSession(){return new Promise((t=>{(class{static addEventListnerTo(t,e,n,i={}){const r=Object.assign({useCapture:!0},i);t.addEventListener&&t.addEventListener(e,n,r)}}).addEventListnerTo(window,"message",(e=>{if(e.data)try{const n=JSON.parse(e.data);n.uid_bam&&(this.sessionID=n.uid_bam,this.isNewSession=n.uid_is_new,t())}catch(t){}}));const e=document.createElement("iframe");e.style.display="none",e.setAttribute("src",`${this.urlPath}/session.html`),e.setAttribute("sandbox","allow-same-origin allow-scripts"),document.body.appendChild(e)}))}createNewPageUuid(){this.pageSessionUuid=l()}getCookie(t){const e=t.length+1;return document.cookie.split(";").map((t=>t.trim())).filter((n=>n.substring(0,e)===`${t}=`)).map((t=>decodeURIComponent(t.substring(e))))[0]||null}}var d,p=n(669),f=n.n(p);!function(t){t[t.UNAUTHORIZED=401]="UNAUTHORIZED",t[t.FORBIDDEN=403]="FORBIDDEN",t[t.TOOMANYREQUESTS=429]="TOOMANYREQUESTS",t[t.INTERNALSERVERERROR=500]="INTERNALSERVERERROR"}(d||(d={}));let m={Accept:"application/json","Content-Type":"application/json; charset=utf-8","Access-Control-Allow-Credentials":!0,"X-Requested-With":"XMLHttpRequest"};const g=new class{constructor(){this.instance=null}get http(){return null!=this.instance?this.instance:window.narrativ.pixelVersion?this.initHttp(window.narrativ.pixelVersion):this.initHttp()}initHttp(t){t&&(m["X-Howl-Pixel-Version"]=t);const e=f().create({baseURL:"",headers:m,withCredentials:!1});return e.interceptors.response.use((t=>t),(t=>{const{response:e}=t;return this.handleError(e)})),this.instance=e,e}request(t){return this.http.request(t)}get(t,e){return this.http.get(t,e)}post(t,e,n){return this.http.post(t,e,n)}handleError(t){if(t){const{status:e}=t;switch(e){case d.INTERNALSERVERERROR:case d.FORBIDDEN:case d.UNAUTHORIZED:case d.TOOMANYREQUESTS:}return Promise.reject(t)}}};class w{constructor(t){this.ignoreParam=t.pageConfig.ignoreParam,this.clickmateRegex=new RegExp(t.pageConfig.clickmateRegex),this.howlClickmateRegex=new RegExp(t.pageConfig.howlClickmateRegex)}static getInstance(t){return this.instance||(this.instance=new w(t)),this.instance}normalizeUri(t){if(this.clickmateRegex.test(t)||this.howlClickmateRegex.test(t))return this.parseClickmate(t);const e=this.productUri(t);return e&&!this.isSameHostAsPage(e)?this.cleanupUri(e):null}parseClickmate(t){const e=new URL(t).searchParams.get("url");if(e)return e;{let e=t.split("url=")[1];return decodeURIComponent(e)}}isSameHostAsPage(t){return"string"==typeof t?new RegExp(document.location.hostname.replace("www.","")).test(t.replace("www.","")):new RegExp(document.location.hostname.replace("www.","")).test(t.host.replace("www.",""))}productUri(t){if(t){if(this.isSameHostAsPage(t))return null;if(!this.isValidUri(t))return null;try{let e;try{t=decodeURIComponent(t)}catch(t){}e=this.getUri(t);let n=this.uriFromSearchParams(e.searchParams),i=this.uriFromPath(e.pathname);return n?e=n:i&&(e=i),e}catch(t){return null}}return null}getUri(t){let e=new URL(t);switch(e.hostname){case"prf.hn":return new URL(e.pathname.split("destination:")[1]);case"www.anrdoezrs.net":case"assoc-redirect.amazon.com":case"aax-us-east.amazon-adsystem.com":return this.splitByHttps(e.href);case"shareasale.com":return this.splitByAfftrack(e.href);case"go.redirectingat.com":return this.splitBySkimResources(e.href)}return e}splitByHttps(t){const e=t.split("/https")[1];return new URL(`https${e}`)}splitByAfftrack(t){let e=new URL(t);const n=e.searchParams.get("urllink");return n&&(e=new URL(`https://${n}`)),e}splitBySkimResources(t){const e=t.split("%https://go.skimresources.com")[0];return new URL(`https${e}`)}isValidUri(t){return/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/i.test(t)}uriFromSearchParams(t){let e=null;return t.forEach((t=>{const n=this.productUri(t);n&&(e=n)})),e}uriFromPath(t){let e=null;return t&&t.split("&").forEach((t=>{let n=t.split("=");if(2===n.length){const t=this.productUri(n[1]);t&&(e=t)}})),e}cleanupUri(t){const e=new Set(this.ignoreParam),n=t.origin,i=this.pathParams(t.pathname,e),r=this.searchParams(t.searchParams,e);let s="";r.toString()&&(s=`?${r.toString()}`);let o=`${n}${i}${s}`;return/\s/g.test(o)&&(o=o.replaceAll(" ","%20")),o}pathParams(t,e){let n,i="";return n=t.includes("&")?t.split("&").filter((t=>{const n=t.split("=");return 2!=n.length||!e.has(n[0].toLocaleLowerCase())})):t.split("/").filter((t=>{const n=t.split("=");return 2!=n.length||!e.has(n[0].toLocaleLowerCase())})),n.length>0&&(i+=n.join("/")),i}searchParams(t,e){let n="",i=new Array;for(const[n,r]of t)e.has(n.toLocaleLowerCase())||i.push(`${n}=${r}`);return i.length>0&&(n+=i.join("&")),n}}class v{constructor(t){this.urlPath=`${t.host}/${t.path}`,this.linkUrlPath=`${t.linkHost}/api/v2`,this.uriNormalizer=w.getInstance(t),this.urlExclusiveKeywords=t.pageConfig.urlExclusiveKeywords,this.titleExclusiveKeywords=t.pageConfig.titleExclusiveKeywords,this.titleExclusiveMerchants=t.pageConfig.titleExclusiveMerchants,this.shoplinkRegex=new RegExp(t.pageConfig.shoplinkRegex),this.clickmateRegex=new RegExp(t.pageConfig.clickmateRegex),this.howlLinkRegex=new RegExp(t.pageConfig.howlLinkRegex),this.howlClickmateRegex=new RegExp(t.pageConfig.howlClickmateRegex)}static getInstance(t){return this.instance||(this.instance=new v(t)),this.instance}getEditInfo(){return{page_url:window.narrativ.page_url,page_title:window.narrativ.page_title}}createAuction(t,e,n,i){const r=new Array;let s=new Map;t.forEach((t=>{let e=t.toString();const o=this.isExclusiveContent(e)||n.has(e)||i.has(e);if(window.narrativ.donotlink||this.shoplinkRegex.test(e)||this.howlLinkRegex.test(e)){if(this.clickmateRegex.test(e)||this.howlClickmateRegex.test(e)){let t=this.uriNormalizer.normalizeUri(e);t&&s.set(e,{exclusive_match_requested:o,link_source:"clickmate",raw_url:t})}}else r.push({exclusive_match_requested:o,link_source:"linkmate",raw_url:e})}));const o={edit:this.getEditInfo(),links:r};let a=new Array;s&&(a=this.buildClickmatePayloads(s));let c=null,u=new Array;return r.length>0&&(c=g.post(`${this.linkUrlPath}/smart_links/${e}`,o)),a.length>0&&a.forEach((t=>{u.push(g.post(`${this.linkUrlPath}/smart_links/${e}`,t))})),[c,...u]}buildClickmatePayloads(t){let e=new Map;t.forEach(((t,n)=>{var i;const r=new URL(n),s=(null===(i=r.searchParams.get("article_url"))||void 0===i?void 0:i.trim())||window.narrativ.page_url,o=r.searchParams.get("article_name")||window.narrativ.page_title,a=o+s;e.has(a)||e.set(a,{edit:{page_title:o,page_url:s},links:[]}),e.get(a).links.push(t)}));let n=new Array;return e.forEach(((t,e)=>{n.push(t)})),n}isExclusiveContent(t){if(window.narrativ.exclusiveLinks)return window.narrativ.exclusiveLinks;{const e=window.location.href.toLowerCase();for(let t=0;t<this.urlExclusiveKeywords.length;t++)if(e.includes(this.urlExclusiveKeywords[t]))return!0;if(window.narrativ.page_title){const t=window.narrativ.page_title.toLowerCase();for(let e=0;e<this.titleExclusiveKeywords.length;e++)if(t.includes(this.titleExclusiveKeywords[e]))return!0;for(let e=0;e<this.titleExclusiveMerchants.length;e++)if(t.includes(this.titleExclusiveMerchants[e]))return!0}if(t&&(this.clickmateRegex.test(t)||this.howlClickmateRegex.test(t))){const e=new URL(t).searchParams.get("exclusive");if(e&&"1"==e)return!0}}return!1}runAuction(t,e){return n=this,i=void 0,s=function*(){let n=`?a=${t}&t=${Date.now()}&uuid=${h.getInstance().pageSessionUuid}`;return e&&(n=n.concat(`&u1=${e}`)),yield g.get(`${this.urlPath}/auction/${n}`)},new((r=void 0)||(r=Promise))((function(t,e){function o(t){try{c(s.next(t))}catch(t){e(t)}}function a(t){try{c(s.throw(t))}catch(t){e(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(o,a)}c((s=s.apply(n,i||[])).next())}));var n,i,r,s}}class k{constructor(){}static getInstance(){return this.instance||(this.instance=new k),this.instance}normalizeUrl(t){return t.substring(0,t.indexOf("#"))||t}formatUrl(t,e){return t?((t=t.trim()).length>e&&(t=t.substring(0,e)),t):null}formatField(t,e){return t?(t.length>e&&(t=t.substring(0,e)),t):null}formatClickmateLink(t,e){if(t){const n=new URL(t);if(!n.searchParams.get("url"))return null;if(!n.searchParams.get("publisher_slug"))return null;const i=n.searchParams.get("article_url"),r=n.searchParams.get("article_name"),s=encodeURIComponent(e.split("#")[0]);if(i?"string"==typeof i&&/^https?:\/\//i.test(i)||(t=t.replace(`article_url=${i}`,`article_url=${s}`)):t=""===i?t.replace(`article_url=${i}`,`article_url=${s}`):`${t}&article_url=${s}`,window.narrativ.page_title){const e=window.narrativ.page_title.replace(/ /g,"_");return r?"string"==typeof r&&"null"!==r||(t=t.replace(`article_name=${r}`,`article_name=${e}`)):t=""===r?t.replace(`article_name=${r}`,`article_name=${e}`):`${t}&article_name=${e}`,t}}return null}}var x=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};class y{constructor(t){this.formatter=k.getInstance(),this.urlPath=`${t.eventHost}/${t.path}/publishers`,this.session=h.getInstance(t)}static getInstance(t){return this.instance||(this.instance=new y(t)),this.instance}pageImpressionEvent(t,e){return x(this,void 0,void 0,(function*(){const n={events:[{}],user:{page_session_uuid:this.session.pageSessionUuid,source_url:this.formatter.formatUrl(t,2048),previous_url:this.formatter.formatUrl(document.referrer,2048)}};return yield g.post(`${this.urlPath}/${e}/impressions/page_impression/?uid_bam=${this.session.sessionID}`,n)}))}linkImpressionEvent(t,e){return x(this,void 0,void 0,(function*(){const n={events:[{auction_id:t}],user:{page_session_uuid:this.session.pageSessionUuid,source_url:this.formatter.formatUrl(window.location.href,2048),previous_url:this.formatter.formatUrl(document.referrer,2048)}};return yield g.post(`${this.urlPath}/${e}/impressions/bam_link_impression/?uid_bam=${this.session.sessionID}`,n)}))}linkViewableImpression(t,e){return x(this,void 0,void 0,(function*(){const n={events:[{auction_id:t}],user:{page_session_uuid:this.session.pageSessionUuid,source_url:this.formatter.formatUrl(window.location.href,2048),previous_url:this.formatter.formatUrl(document.referrer,2048)}};return yield g.post(`${this.urlPath}/${e}/impressions/bam_link_viewable_impression/?uid_bam=${this.session.sessionID}`,n)}))}}var b=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};class E{constructor(t){this.formatter=k.getInstance(),this.eventUrlPath=`${t.eventHost}/${t.path}/publishers`,this.urlPath=`${t.host}/${t.path}`,this.session=h.getInstance(t)}static getInstance(t){return this.instance||(this.instance=new E(t)),this.instance}onHover(t,e,n,i){return b(this,void 0,void 0,(function*(){const t={user:{page_session_uuid:this.session.pageSessionUuid,source_url:this.formatter.formatUrl(e,2048),previous_url:this.formatter.formatUrl(document.referrer,2048)},events:[{auction_id:n}]},r=`${this.eventUrlPath}/${i}/interactions/bam_link_hover/?uid_bam=${this.session.sessionID}`;return yield g.post(r,t)}))}onClick(t){}linkClickEvent(t,e){return b(this,void 0,void 0,(function*(){const n={events:[{page_title:this.formatter.formatField(window.narrativ.page_title,100),target_url:this.formatter.formatField(t,2048)}],organization_type:window.narrativ.config.pageConfig.organization,organization_id:e,user:{page_session_uuid:this.session.pageSessionUuid,source_url:this.formatter.formatUrl(window.location.href,2048),previous_url:this.formatter.formatUrl(document.referrer,2048)}},i=`${this.urlPath}/links/click/`;return yield g.post(i,n)}))}}class R{constructor(t,e,n,i){this.formatter=k.getInstance(),this.isViewed=!1,this.isHovered=!1,this.href="href",this.chromeExMatch=/^https?:\/\/.*?shop-links.[^/]+\/(\d{19}|affiliate|[a-zA-Z0-9]{11})/,this.howlChromeExMatch=/^https?:\/\/.*?howl.[^/]+\/(\d{19}|affiliate|[a-zA-Z0-9]{11})/,this.isChromeEx=!1,this.chromeExAuctionId=null,this.onClick=t=>{const e=t.currentTarget;if(e instanceof HTMLAnchorElement){if(this.origURL=e.getAttribute(this.href),this.origURL&&window.narrativ.donotlink&&(this.clickmateRegex.test(this.origURL)||this.howlClickmateRegex.test(this.origURL))){const t=this.formatter.formatClickmateLink(this.origURL,window.narrativ.page_url);t&&e.setAttribute(this.href,t)}!window.narrativ.donotlink&&this.auctionInfo?(e.setAttribute(this.href,this.auctionInfo.redirect_url?this.auctionInfo.redirect_url:""),setTimeout((()=>{e.setAttribute(this.href,this.origURL?this.origURL:"")}),10)):!this.auctionInfo&&window.narrativ.recordExternalClicks&&(this.isNrtvLink(e)||E.getInstance(this.appConfig).linkClickEvent(e.getAttribute(this.href),this.pubId))}},this.onMouseover=t=>{const e=t.currentTarget;if(e instanceof HTMLAnchorElement&&!this.isHovered){const t=e.getAttribute(this.href);this.auctionInfo&&(this.isHovered=!0,this.origURL=t,window.narrativ.donotlink||(this.displayURL=decodeURIComponent(this.auctionInfo.redirect_url).split("url=")[1],this.displayURL&&e.setAttribute(this.href,this.displayURL)),this.isChromeEx&&this.chromeExAuctionId?E.getInstance(this.appConfig).onHover(t,window.location.href,this.chromeExAuctionId,this.pubId):E.getInstance(this.appConfig).onHover(e.getAttribute(this.href),window.location.href,this.auctionInfo.auction_id,this.pubId))}else e instanceof HTMLAnchorElement&&this.isHovered&&this.displayURL&&e.setAttribute(this.href,this.displayURL)},this.onMouseout=t=>{const e=t.target;e instanceof HTMLAnchorElement&&this.origURL&&e.setAttribute(this.href,this.origURL)},this.intersectObserverCallback=(t,e)=>{t.forEach((t=>{t.isIntersecting&&this.auctionInfo&&!this.isViewed&&(this.isChromeEx&&this.chromeExAuctionId?y.getInstance(this.appConfig).linkViewableImpression(this.chromeExAuctionId,this.pubId):y.getInstance(this.appConfig).linkViewableImpression(this.auctionInfo.auction_id,this.pubId),this.isViewed=!0)}))},this.appConfig=i,this.elements=e,this.auctionInfo=null,this.origURL=null,this.displayURL=null,this.u1Param=null,this.pubId=n,this.nrtvDomains=i.pageConfig.nrtvDomains,this.shoplinkRegex=new RegExp(i.pageConfig.shoplinkRegex),this.clickmateRegex=new RegExp(i.pageConfig.clickmateRegex),this.howlLinkRegex=new RegExp(i.pageConfig.howlLinkRegex),this.howlClickmateRegex=new RegExp(i.pageConfig.howlClickmateRegex),this.init(t),this.elements.push(t)}init(t){t.addEventListener("click",this.onClick),t.addEventListener("mouseover",this.onMouseover),t.addEventListener("mouseout",this.onMouseout),this.addObserver(t),this.addIntersectObserver(t),this.setU1Param(t),this.isChromeExtensionLink(t)}setU1Param(t){if(this.u1Param=window.narrativ.u1Param,!this.u1Param){const e=t.getAttribute(this.href);e&&(this.u1Param=new URL(e).searchParams.get("u1"))}}isChromeExtensionLink(t){const e=t.getAttribute(this.href);if(e&&(this.shoplinkRegex.test(e)&&!this.clickmateRegex.test(e)||this.howlLinkRegex.test(e)&&!this.howlClickmateRegex.test(e))){const t=this.parseAuctionIdFromShoplink(e);t&&(this.isChromeEx=!0,this.chromeExAuctionId=t,0===this.elements.length&&this.getAuctionResult())}}parseAuctionIdFromShoplink(t){let e=t.match(this.chromeExMatch),n=t.match(this.howlChromeExMatch);return e?e[1]:n?n[1]:null}isNrtvLink(t){return!(!t.href.match(new RegExp(this.nrtvDomains))&&!t.href.includes(".nrtv_plchldr."))}getElements(){return this.elements}setElements(t){this.init(t),this.elements.push(t)}setAuctionData(t){this.auctionInfo=t,this.getAuctionResult(t)}getAuctionInfo(){return this.auctionInfo}getAuctionResult(t){let e="";t?e=t.auction_id:this.isChromeEx&&this.chromeExAuctionId&&(e=this.chromeExAuctionId),e&&v.getInstance(this.appConfig).runAuction(e,this.u1Param).then((t=>{if(200===t.status){const n=t.data.data;if(n instanceof Array&&n.length>0){const t=n[0].auction_result;window.narrativ.donotlink||this.elements.forEach((e=>e.setAttribute("data-bamx-auction",JSON.stringify(t)))),this.isChromeEx&&(this.auctionInfo=t),this.auctionInfo&&(this.auctionInfo.id=t.id,this.auctionInfo.redirect_url=t.redirect_url,y.getInstance(this.appConfig).linkImpressionEvent(e,this.pubId),t.product&&(this.auctionInfo.display_url=t.product.url))}}}))}addObserver(t){new MutationObserver(this.observerCallback).observe(t,{childList:!0,attributes:!0})}observerCallback(t,e){}addIntersectObserver(t){new IntersectionObserver(this.intersectObserverCallback,{root:null,rootMargin:"0px",threshold:1}).observe(t)}}class C{constructor(){}static getInstance(){return this.instance||(this.instance=new C),this.instance}isEligibleUrl(t,e,n,i,r,s,o){return!(this.isSameHostAsPage(t,e)||this.isIgnoredHost(t,n,i,o)||this.isIgnoredPath(t,r)||this.isVigLink(t)||this.isAuctioned(t,s)||this.isFromOtherPage(t)||this.isFromBlockedElement(t))}isSameHostAsPage(t,e){return new RegExp(e.replace("www.","")).test(t.host.replace("www.",""))}isAuctioned(t,e){var n;return!!(null===(n=e.get(t.href))||void 0===n?void 0:n.getAuctionInfo())}isVigLink(t){return"vigilink"===t.getAttribute("data-hl")||"Link added by VigLink"===t.getAttribute("title")}isIgnoredHost(t,e,n,i){let r=t.hostname.replace("www.",""),s=r.substring(0,r.lastIndexOf("."));return!(1084!==i&&2729!==i||!new Set(["rstyle","shareasale","amazon","amazon.co","socialitebeauty","redlightman","thesunscreencompany","consonantskincare","gothink"]).has(s))||!(!e.has(s)&&!t.href.match(new RegExp(n)))}isIgnoredPath(t,e){if(t.href){const n=new URL(t.href).pathname.split("/");for(const t in n)if(e.has(n[t].replace(".html","")))return!0}return!1}isFromBlockedElement(t){if(window.narrativ.pubConfigs&&window.narrativ.pubConfigs.blockedElements){let e=t.parentElement;for(;e;){if(window.narrativ.pubConfigs.blockedElements.has(e.className)||window.narrativ.pubConfigs.blockedElements.has(e.id))return!0;e=e.parentElement}}return!1}isFromOtherPage(t){window.narrativ.urlMap.get(window.location.href)||window.narrativ.urlMap.set(window.location.href,new Array);for(let e of window.narrativ.urlMap.keys())if(e!==window.location.href){const n=window.narrativ.urlMap.get(e),i=new Set;if(n&&n.length>0){for(const t of n)i.add(t.href);if(i.has(t.href))return!0}}return!1}}class _{constructor(t,e){this.formatter=k.getInstance(),this.retrievedFromUrlMap=!1,this.tagType="a",this.hostName=location.hostname,this.appConfig=t,this.pubId=e,this.uriNormalizer=w.getInstance(t),this.elementMap=new Map,this.clickmateMap=new Map,this.ignoredHosts=new Set(t.pageConfig.ignoreHost),this.excludedStrings=t.pageConfig.excludedString,this.ignoredPaths=new Set(t.pageConfig.ignorePath),this.shoplinkRegex=new RegExp(t.pageConfig.shoplinkRegex),this.howlLinkRegex=new RegExp(t.pageConfig.howlLinkRegex),this.clickmateRegex=new RegExp(t.pageConfig.clickmateRegex),this.howlClickmateRegex=new RegExp(t.pageConfig.howlClickmateRegex),this.noAuction=new Set,this.lockLinks=new Set,this.isLockLink=!1,this.init()}init(){this.setEdit(),this.assignWidget(),this.triggerPageImpression(),this.triggerSmartlinksEvent()}setEdit(){document.title&&""!=document.title?window.narrativ.page_title=document.title:parent.document.title&&""!=parent.document.title?window.narrativ.page_title=parent.document.title:window.narrativ.page_title=null;const t=document.querySelector('link[rel="canonical"]');t&&!window.narrativ.isSinglePageApplication?window.narrativ.page_url=this.formatter.normalizeUrl(t.href):window.narrativ.page_url=this.formatter.normalizeUrl(window.location.href)}assignWidget(){var t;const e=this.getElements();let n=this.getFromMap();n||(n=[...e].filter((t=>C.getInstance().isEligibleUrl(t,this.hostName,this.ignoredHosts,this.excludedStrings,this.ignoredPaths,this.elementMap,this.pubId))));const i=window.narrativ.urlMap.get(window.location.href);for(let e=0;e<n.length;e++){this.isLockLink=!1;const r=n[e];let s=r.getAttribute("href");if(s&&/#locklink$/.test(s)&&(this.isLockLink=!0),s&&(this.shoplinkRegex.test(s)||this.howlLinkRegex.test(s)||(s=this.uriNormalizer.normalizeUri(s)),s)){if("noauction"==r.getAttribute("rel")&&this.noAuction.add(s),this.isLockLink&&this.lockLinks.add(s),(this.shoplinkRegex.test(s)&&!this.clickmateRegex.test(s)||this.howlLinkRegex.test(s)&&!this.howlClickmateRegex.test(s))&&(r.href=s),this.clickmateRegex.test(s)||this.howlClickmateRegex.test(s)){const t=this.uriNormalizer.normalizeUri(s);t&&this.clickmateMap.set(t,s)}if(this.elementMap.has(s))null===(t=this.elementMap.get(s))||void 0===t||t.setElements(r);else{const t=new Array,e=new R(r,t,this.pubId,this.appConfig);this.elementMap.set(s,e),this.retrievedFromUrlMap||i.push(r)}}}}triggerPageImpression(){const t=window.location.href;y.getInstance(this.appConfig).pageImpressionEvent(t,this.pubId)}triggerSmartlinksEvent(){const t=[...this.elementMap.keys()];Promise.all(v.getInstance(this.appConfig).createAuction(t,this.pubId,this.lockLinks,this.noAuction)).then((t=>{for(let e=0;e<2;e++)if(t[e]&&t[e].data&&0===t[e].data.error.ErrorCode){const n=t[e].data.data.smart_links;n&&n.length>0&&n.forEach((t=>{let e=this.elementMap.get(t.url);if(!e){const n=this.clickmateMap.get(t.url);n&&(e=this.elementMap.get(n))}null==e||e.setAuctionData(t)}))}}))}getFromMap(){const t=window.narrativ.urlMap.get(window.location.href);return t?(this.retrievedFromUrlMap=!0,t):null}getElements(){return document.querySelectorAll(this.tagType)}}class A{constructor(t){this.urlPath=`${t.eventHost}/${t.path}`}static getInstance(t=null){return this.instance||(this.instance=new A(t)),this.instance}requestPubInfo(t){return g.get(`${this.urlPath}/publishers/${t}/pub_info/`)}}const I=JSON.parse('{"env":"RELEASE","host":"https://api.narrativ.com","eventHost":"https://events.release.narrativ.com","linkHost":"https://links.release.narrativ.com","path":"api/v0","pageConfig":{"organization":"publisher","nrtvDomains":"api.bam-x.com|api.narrativ.com|shop-links.co|events.release.narrativ.com|howl.me","shoplinkRegex":"https?://shop-links.co","howlLinkRegex":"https?://howl.me","clickmateRegex":"https?://shop-links.co/link","howlClickmateRegex":"https?://howl.me/link","ignoreHost":["adclick.g.doubleclick","exoclick","facebook","google","instagram","itunes.apple","linkedin","open.spotify","paypal","pinterest","t","tiktok","tumblr","twitter","youtube","podcasts.apple","w1.buysub","zergnet"],"ignorePath":["about","advertising","careers","news","optout","privacy-policy","search"],"ignoreParam":["acampid","ascsubtag","cm_mmc","irclickid","irgwc","linkcode","loc","mpid","ref","sp_campaign","sp_source","subid1","subid2","subid3","tag","utm_campaign","utm_channel","utm_content","utm_medium","utm_source","utm_term"],"excludedString":"#donotlink|mailto:","urlExclusiveKeywords":["sale","deal","clearance","promotion","percent-off","percentoff"],"titleExclusiveKeywords":["sale","deal","clearance","percent off","% off","promotion"],"titleExclusiveMerchants":["24 sevres","24 sÃ¨vres","aquis","asos","bed bath & beyond","bed bath and beyond","bergdorf goodman","best buy","bloomingdales","buy buy baby","caraway","cariuma","chewy","credo","credo beauty","dermstore","diane von furstenberg","dvf","everlane","farfetch","gap","goop","h&m","hanacure","huda","huda beauty","ilia","ilia beauty","kenneth cole","kosas","la roche-posay","lookfantastic","lord & taylor","lord and taylor","lovely skin","lucky vitamin","macy","macy\'s","macys","matches fashion","matchesfashion","michael kors","moda operandi","moda","mr porter","mr. porter","mytheresa","my theresa","neiman marcus","net-a-porter","nordstrom","revolve","revolve clothing","saks","saks fifth avenue","sephora","skinceuticals","skinstore","ssense","superdown","the outnet","ulta","ulta beauty","verishop","versed skin","versedskin","vichy","violet grey","yesstyle","yes style","yoox"]},"awsConfig":{"s3":{"apiVersion":"2006-03-01","bucket":"static-bam-x-com","key":"tags","accessKeyId":"insecureAccessKey","secretAccessKey":"insecureSecretKey","endPoint":"","port":9000,"useSSL":false,"s3ForcePathStyle":true,"signatureVersion":"v4","region":"us-east-1"},"cloudFront":{"apiVersion":"2016-09-07","distributionId":"E1M9QKLIO7WSCD"}}}');window.narrativ=window.narrativ||{};let U=document.currentScript?document.currentScript.getAttribute("src"):"";if(U){const t=U.split("/");let e=t[t.length-1].split(".js")[0];window.narrativ.pixelVersion=e}function L(){var t;const e=null===(t=document.getElementById("nrtvTag"))||void 0===t?void 0:t.getAttribute("data-narrativ-id");e?A.getInstance(I).requestPubInfo(e).then((t=>{var n;if(t.data&&t.data.data){const i=t.data.data.widget_options;if(i.jstag_disabled)console.warn("NRTV: Tag is disabled");else{const t=null===(n=document.getElementById("nrtvTag"))||void 0===n?void 0:n.getAttribute("data-u1Param"),r=+e;h.getInstance(I).requestTrackingPixel().then((()=>{window.narrativ=Object.assign(Object.assign({},window.narrativ),{config:I,donotlink:!1,exclusiveLinks:!1,recordExternalClicks:!0,pubConfigs:{}}),function(t){t.blocked_elements&&t.blocked_elements.length>0&&(window.narrativ.pubConfigs.blockedElements=new Set(t.blocked_elements))}(i),t&&(window.narrativ.u1Param=t),window.NRTV_EVENT_DATA&&window.NRTV_EVENT_DATA.donotlink&&(window.narrativ.donotlink=window.NRTV_EVENT_DATA.donotlink),window.NRTV_EVENT_DATA&&window.NRTV_EVENT_DATA.exclusiveLinks&&(window.narrativ.exclusiveLinks=window.NRTV_EVENT_DATA.exclusiveLinks),(!1===i.record_external_clicks||window.NRTV_EVENT_DATA&&!1===window.NRTV_EVENT_DATA.recordExternalClicks)&&(window.narrativ.recordExternalClicks=!1),window.narrativ.urlMap=new Map,window.narrativ.isSinglePageApplication=!1,window.narrativ.compass=new _(window.narrativ.config,r);let e=window.location.href;new MutationObserver((t=>{const n=new MutationObserver((t=>{e!==window.location.href&&(e=window.location.href,h.getInstance().createNewPageUuid(),window.narrativ.isSinglePageApplication=!0,window.narrativ.compass=new _(window.narrativ.config,r)),n.disconnect()}));n.observe(document.querySelector("title"),{childList:!0,attributes:!0,attributeOldValue:!0,subtree:!0,characterData:!0,characterDataOldValue:!0})})).observe(document.querySelector("body"),{childList:!0,subtree:!0})})).catch((()=>{console.warn("NRTV: Error creating session.")}))}}else console.warn("NRTV: No publisher data found.")})).catch((t=>{console.warn("NRTV: Publisher not found.")})):console.warn("NRTV: Missing ID.")}"complete"!==document.readyState||window.narrativ.isInitialized||(window.narrativ.isInitialized=!0,L()),document.onreadystatechange=()=>{"loading"===document.readyState||"interactive"!==document.readyState&&"complete"!==document.readyState||window.narrativ.isInitialized||(window.narrativ.isInitialized=!0,L())}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n(931)})();